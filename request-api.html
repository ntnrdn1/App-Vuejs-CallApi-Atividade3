<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <link href="../reques-api/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../reques-api/css/request-api.css" rel="stylesheet"/>
    
    <title>Request - Api</title>
</head>
<body>
    <div class="container">
            <h1>Consultando CEP - Gotham Sistem</h1>
            <form>
                <div class="form-group">
                    <label for="cep">CEP</label>
                    <input type="text" class="form-control" maxlength="9" id="cep">
                    <small>00000-000</small>
                </div>
                <div class="form-group">
                    <label for="logradouro">Logradouro</label>
                    <input type="text" class="form-control" id="logradouro">
                    <small>Rua.</small>
                </div>
                <div class="form-group">
                    <label for="bairro">Bairro</label>
                    <input type="text" class="form-control" id="bairro">
                    <small>Bairro</small>
                </div>
                <div class="form-group">
                    <label for="localidade">Localidade</label>
                    <input type="text" class="form-control" id="localidade">
                    <small>Cidade</small>
                </div>
                <div class="form-group">
                    <label for="uf">UF</label>
                    <input type="text" class="form-control" id="uf">
                    <small>Estado</small>
                    <p>Ass. Nathan e Rha√¥ny</p>
                </div>
            </form>
    </div>

    <script>
        const cep = document.querySelector("#cep")

            const showData = (result)=>{
                for(const campo in result){
                    if(document.querySelector("#"+campo)){
                        document.querySelector("#"+campo).value = result[campo]
                    }
                }
            }




            cep.addEventListener("blur",(e)=>{
                let search = cep.value.replace("-","")
                const options = {
                    method: 'GET',
                    mode: 'cors',
                    cache: 'default'
                }

                fetch(`https://viacep.com.br/ws/${search}/json/`, options)
                .then(response =>{ response.json()
                    .then( data => showData(data))
                })
                .catch(e => console.log('Deu Erro: '+ e,message))
            })
    </script>

    <script src="../reques-api/js/script.js"></script>
    <script type="text/javascript" src="../reques-api/js/jquery-3.5.1.min.map"></script>
    <script type="text/javascript" src="../reques-api/js/bootstrap.bundle.min.js"></script>
</body>
</html>